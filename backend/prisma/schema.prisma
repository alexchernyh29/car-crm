generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id            String           @id @default(cuid())
  username      String
  email         String           @unique
  passwordHash  String
  createdAt     DateTime         @default(now())
  cars          Car[]
  maintenances  MaintenanceRecord[]
}

model Car {
  id                        String              @id @default(cuid())
  userId                    String
  user                      User                @relation(fields: [userId], references: [id])
  make                      String
  model                     String
  year                      Int
  vin                       String              @unique
  bodyType                  String?
  color                     String?
  engineVolume              Float?
  engineType                String?
  power                     Int?
  fuelTankCapacity          Float?
  cityFuelConsumption       Float?
  highwayFuelConsumption    Float?
  transmission              String?
  driveType                 String?
  length                    Float?
  width                     Float?
  height                    Float?
  groundClearance           Float?
  wheelbase                 Float?
  registrationNumber        String?
  vehicleCertificateNumber  String?
  drivingLicenseNumber      String?
  driverLicenseNumber       String?
  createdAt                 DateTime            @default(now())
  maintenances              MaintenanceRecord[]
}

model MaintenanceRecord {
  id               String   @id @default(cuid())
  userId           String
  user             User     @relation(fields: [userId], references: [id])
  carId            String
  car              Car      @relation(fields: [carId], references: [id])
  date             DateTime
  mileage          Int
  type             String
  partsAndSupplies Json[]
  servicesPerformed Json[]
  notes            String?
  createdAt        DateTime @default(now())
}